function getId(t){return document.getElementById(t)}function get_interval(){var t=new Array,e=5e3,a=document.getElementsByName("reloadOption"),r=a.length;for(i=0;i<r;i++)if(a[i].checked)if("rand"==a[i].value){var o=$("#tmin").val()-0,s=$("#tmax").val()-0;e=o>s?s+"-"+o:o+"-"+s,t[0]=e,t[1]="rand"}else if("custom"==a[i].value){var n=$("#tcustom").val()-0;n<0?(e=1e3,$("#tcustom").val("1")):e=Math.round(1e3*n),t[0]=e,t[1]="custom"}else e=a[i].value,t[0]=e,t[1]="stand";return t}function set_interval(t,e){if("custom"==e)return getId("r08").checked=!0,void(getId("tcustom").value=Math.floor(t/1e3));if("rand"==e){getId("r07").checked=!0;var a=t.split("-");return getId("tmin").value=a[0],void(getId("tmax").value=a[1])}var r=document.getElementsByName("reloadOption"),o=r.length;for(i=0;i<o;i++)if(r[i].value==t)return void(r[i].checked=!0)}function executeContentScript(){return new Promise((t,e)=>{chrome.permissions.contains({origins:["http://*/*","https://*/*"]},a=>{if(a)return t();chrome.permissions.request({origins:["http://*/*","https://*/*"]},a=>{a?t():e()})})})}function startRefresh(){executeContentScript().then(()=>{if("Start"==getId("startbtn").value){getId("startbtn").classList.add("stop"),getId("startbtn").value="Stop",getId("timerbtn").value="Start Timer",getId("timerbtn").classList.remove("stop");var t=get_interval(),e=chrome.extension.getViews(),a=getId("contentid").value,r=getId("pdurlinp").value;for(var o in e)if(a){var i=getId("pmpattern").value;e[o].loop_start&&e[o].loop_start(-1,t[0],t[1],a,i,r)}else e[o].loop_start&&e[o].loop_start(-1,t[0],t[1],null,null,r)}else{getId("startbtn").value="Start",getId("startbtn").classList.remove("stop");e=chrome.extension.getViews();for(var o in e)e[o].loop_stop&&e[o].loop_stop()}}).catch(t=>{alert("Host permissions are required")})}function startTimer(){if("Start Timer"==getId("timerbtn").value){var t=get_interval(),e=getId("contentid").value,a=getId("pdurlinp").value;if("1"==getId("timermode").value){var r=parseInt(getId("timerHour").value),o=parseInt(getId("timerMin").value),i=parseInt(getId("timerSec").value);if(isNaN(r)&&(r=0,getId("timerHour").value="0"),isNaN(o)&&(o=0,getId("timerMin").value="0"),isNaN(i)&&(i=0,getId("timerSec").value="0"),(v=1e3*(3600*r+60*o+i))<=0);else{var s=chrome.extension.getViews();for(var n in s)if(e){var l=getId("pmpattern").value;s[n].loop_start&&s[n].loop_start(v,t[0],t[1],e,l,a)}else s[n].loop_start&&s[n].loop_start(v,t[0],t[1],null,null,a);getId("timerbtn").value="Cancel Timer",getId("timerbtn").classList.add("stop"),getId("startbtn").value="Start",getId("startbtn").classList.remove("stop")}}else{var d=getId("dateInp").value,c=new Date(d);if(isNaN(c))return;var m=d+" "+getId("timeInp").value,u=new Date(m);if(isNaN(u))return;if((new Date).getTime()>=u.getTime());else{var g=u.getMonth()+1,v=(c=u.getFullYear()+"/"+g+"/"+u.getDate())+" "+(u=u.getHours()+":"+u.getMinutes()+":"+u.getSeconds());s=chrome.extension.getViews();for(var n in s)if(e){l=getId("pmpattern").value;s[n].loop_start&&s[n].loop_start(v,t[0],t[1],e,l,a)}else s[n].loop_start&&s[n].loop_start(v,t[0],t[1],null,null,a);getId("timerbtn").value="Cancel Timer",getId("timerbtn").classList.add("stop"),getId("startbtn").value="Start",getId("startbtn").classList.remove("stop")}}}else{getId("timerbtn").value="Start Timer",getId("timerbtn").classList.remove("stop");s=chrome.extension.getViews();for(var n in s)s[n].loop_stop&&s[n].loop_stop()}}function restoreOptions(){if(localStorage.default_time&&set_interval(1e3*localStorage.default_time,"custom"),"true"==localStorage.random_time&&$("#randombox").show(),localStorage.pmonitor&&"true"==localStorage.pmonitor&&($("#monitorbox").show(),localStorage.pmpattern&&"B"==localStorage.pmpattern?($("#pagemr02").show(),$("#pagemr01").hide(),$("#pmpattern").val("B")):($("#pagemr02").hide(),$("#pagemr01").show(),$("#pmpattern").val("A"))),localStorage.pdcheck&&"true"==localStorage.pdcheck){$("#pdurlbox").show();var t=localStorage.pdurl;$("#pdurlinp").val(t)}if(localStorage.timercheck&&"true"==localStorage.timercheck)if($("#timerbox").show(),"1"==localStorage.timermode)$("#countdownMode").show(),$("#timermode").val("1");else{$("#timermode").val("2"),$("#dateMode").show();var e=new Date((new Date).getTime()+6e5),a=e.getMonth()+1;a<10&&(a="0"+a);var r=e.getFullYear()+"/"+a+"/"+e.getDate(),o=e.getHours()+":"+e.getMinutes()+":"+e.getSeconds();$("#dateInp").val(r),$("#timeInp").val(o)}var i=chrome.extension.connect({name:"getOptions"});i.onMessage.addListener(recvData),i.postMessage({msg:"getAllOptions"}),document.body.style.paddingRight="11px"}function recvData(t){if("start"==t.status?(getId("startbtn").value="Stop",getId("startbtn").classList.add("stop")):"wait"==t.status?(getId("timerbtn").value="Cancel Timer",getId("timerbtn").classList.add("stop")):(getId("startbtn").value="Start",getId("startbtn").classList.remove("stop"),getId("timerbtn").value="Start Timer",getId("timerbtn").classList.remove("stop")),set_interval(t.time_interval,t.time_type),t.checkme&&(getId("contentid").value=t.checkme),t.wait_time)if(-1==t.wait_time.toString().search(" ")){var e=t.wait_time/1e3,a=Math.floor(e/3600),r=Math.floor((e-3600*a)/60),o=Math.floor(e-3600*a-60*r);getId("timerHour").value=a,getId("timerMin").value=r,getId("timerSec").value=o,$("#timermode").val("1")}else{var i=new Date(t.wait_time),s=i.getMonth()+1;s<10&&(s="0"+s);var n=i.getDate()+1;n<10&&(n="0"+n);var l=i.getMinutes()+1;l<10&&(l="0"+l);var d=i.getSeconds()+1;d<10&&(d="0"+d);var c=i.getFullYear()+"/"+s+"/"+i.getDate(),m=i.getHours()+":"+l+":"+d;$("#dateInp").val(c),$("#timeInp").val(m),$("#timermode").val("2")}}$(document).ready(function(){setTimeout(restoreOptions,1),$("#startbtn").click(startRefresh),$("#r08").click(function(){getId("tcustom").focus()}),$("#tcustom").focus(function(){getId("r08").checked=!0}),$("#r07").click(function(){getId("tmin").focus()}),$("#tmin").focus(function(){getId("r07").checked=!0}),$("#tmax").focus(function(){getId("r07").checked=!0}),$("#timerbtn").click(startTimer)});var scrollRoot=document.body,header=getId("header"),is_scrolling=!0;function update(){is_scrolling&&(scrollRoot.scrollTop?header.classList.add("scrolled"):header.classList.remove("scrolled"),is_scrolling=!1),requestAnimationFrame(update)}update(),document.onscroll=function(){is_scrolling=!0};